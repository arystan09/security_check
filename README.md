# Security Check

Система отслеживания проникновения на запрещенную территорию по видео.

## Установка

```bash
pip install -r requirements.txt
```

## Использование

### Разметка запрещенных зон

```bash
python mark_zones.py test.mp4
```

Инструмент для разметки зон поверх видео:
- Левый клик мыши — добавить точку многоугольника
- ENTER — завершить текущую зону
- C — очистить текущую зону
- SPACE — следующий кадр
- B — предыдущий кадр
- S — сохранить зоны и выйти
- Q/ESC — выйти без сохранения

Зоны сохраняются в `restricted_zones.json`.

### Детекция проникновения

```bash
python detect_intrusion.py test.mp4
```

Параметры:
- `--zones` — путь к JSON с зонами (по умолчанию `restricted_zones.json`)
- `--model` — путь к модели YOLO (по умолчанию `yolov8n.pt`, загрузится автоматически)
- `--device` — устройство: `cpu`, `cuda` или `0` (по умолчанию `cpu`)
- `--output` — путь для сохранения результата
- `--no-preview` — отключить превью

Управление:
- Q — выход
- S — сохранить и выйти (если указан `--output`)

## Структура проекта

```
src/
├── zone_manager.py       # Управление зонами
├── zone_marker.py        # Инструмент разметки
├── geometry_utils.py     # Проверка пересечений
└── intrusion_detector.py # Детекция и тревога
```

## Формат зон

Зоны хранятся в `restricted_zones.json`:

```json
{
  "zones": [
    {
      "id": 1,
      "points": [[x1, y1], [x2, y2], ...]
    }
  ]
}
```

